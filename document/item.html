<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600646 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="content-class" content="yinxiang.markdown"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1478"/>

<div><span><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">道具系统</h3>
<hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">容器(Tray)</h4>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">功能</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">放置道具(符合指定条件)</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">通过填写道具配置文件匹配容器类型</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">通过容器自定义 <code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">check_drop</code> 函数筛选可以放入的道具</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">function</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">M:check_drop</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(item)</span></span>
</code></pre>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">查找道具</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">根据位置查找某一个道具</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">function</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">M:fetch_item</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(slot)</span></span>
</code></pre>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">根据条件查找某类道具列表</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">  <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">function</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">M:query_items</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(cmp)</span></span>
</code></pre>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">支持通过派生的方式重写 <strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">拿起(check_pick/pick)</strong> 和 <strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">放下(check_drop/drop)</strong> 以及 <strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">use</strong> 的逻辑</p>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">添加删除道具时自动同步</p>
</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">代码列表</h5>
<table style="margin: 2px 0 14px; color: #333; width: auto; border-collapse: collapse; box-sizing: border-box;"><thead style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">文件</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">功能</th></tr></thead><tbody style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">tray_class_base.lua</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">容器基类</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">tray_class_bag.lua</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">背包</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">tray_class_equip.lua</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">装备</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">tray_class_imprint.lua</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">印记</td></tr></tbody></table>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">2. Item</h4>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">功能</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">道具本身没有功能，只有数据，外部模块取这些数据去做相应的事情</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">配置数据</li>
</ul>
<table style="margin: 2px 0 14px; color: #333; width: auto; border-collapse: collapse; box-sizing: border-box;"><thead style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">属性名</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">作用</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">类型</th></tr></thead><tbody style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">tray</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">支持的容器中</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">[1,2,3]</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">desc</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">描述</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"></td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">stack_count_max</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">最大叠加数</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">64</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">canUse</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">是否可以使用</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">false</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">icon</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">图标</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">angel_wings.png</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">mesh</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">模型</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"></td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">equip_buff</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">装备 buff, 穿上这个道具可以获得指定buff</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">&quot;myplugin/xxxbuff&quot;</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">equip_skin</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">装备改变人物外观</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">{ &quot;master1&quot; : &quot;slave1&quot;, &quot;master2&quot; : &quot;slave2&quot;}</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">equip_skill</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">装备技能</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">[&quot;myplugin/skill1&quot;, &quot;myplugin/skill2&quot;]</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">needSave</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">是否需要保存</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">true/false</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">saveVars</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">需要保存的对象变量</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">{&quot;xxx&quot;: true, &quot;yyy&quot;:true }</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">skill</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">手持技能</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">{&quot;myplugin/skill3&quot;, &quot;myplugin/skill4&quot;}</td></tr></tbody></table>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">代码列表</h5>
<table style="margin: 2px 0 14px; color: #333; width: auto; border-collapse: collapse; box-sizing: border-box;"><thead style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">文件</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">功能</th></tr></thead><tbody style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">item_class.lua</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">获取道具配置属性接口</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">item_data.lua</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">道具对象数据</td></tr></tbody></table>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">Entity 容器管理</h4>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">配置默认容器</h5>
<blockquote style="line-height: 160%; box-sizing: content-box; margin: 15px 0; border-left: 4px solid #ddd; padding: 0 15px; color: #777;">
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333; margin-top: 0; margin-bottom: 0;">配置装备 1, 2, 3, 4</p>
</blockquote>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">entityCfg.equipTrays:[1, 2, 3, 4]
</code></pre>
<blockquote style="line-height: 160%; box-sizing: content-box; margin: 15px 0; border-left: 4px solid #ddd; padding: 0 15px; color: #777;">
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333; margin-top: 0; margin-bottom: 0;">配置背包</p>
</blockquote>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">World.cfg.bagCap: 54
</code></pre>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">主要函数</h5>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">给玩家背包添加道具<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">function</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">M:add_item</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(full_name, count, proc, check)</span></span>
</code></pre>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">添加容器<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">function</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">M:add_tray</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(obj)</span></span>
</code></pre>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">查找容器<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">function</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">M:query_trays</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(filter)</span></span>  <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">-- 根据条件查找</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">function</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">M:fetch_tray</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(tid)</span></span>  <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">-- 根据背包id</span>
</code></pre>
</li>
</ul>
<table style="margin: 2px 0 14px; color: #333; width: auto; border-collapse: collapse; box-sizing: border-box;"><thead style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">文件</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">功能</th></tr></thead><tbody style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">entity_tray.lua</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">Entity 容器管理</td></tr></tbody></table>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">道具对象</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">以对象的方式操作道具更加符合trigger-action开发直觉</p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">方块道具(BlockItem)</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">方块道具是某类特别的道具，它的 fullName 固定为 <code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">/block</code>，通过设置 blockId 来区分不同的方块</p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">场景道具(DropItem)</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">场景对象，带有道具数据，有生命期，捡起来之后会获得相应道具</p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">手上道具(HoldItem)</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">快捷栏选中的道具就是手上道具，会给玩家添上道具配置中的技能</p>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%23%23%20%E9%81%93%E5%85%B7%E7%B3%BB%E7%BB%9F%0A---%0A%0A%23%23%23%23%20%E5%AE%B9%E5%99%A8(Tray)%0A%23%23%23%23%23%20%E5%8A%9F%E8%83%BD%0A*%20%E6%94%BE%E7%BD%AE%E9%81%93%E5%85%B7(%E7%AC%A6%E5%90%88%E6%8C%87%E5%AE%9A%E6%9D%A1%E4%BB%B6)%0A%20%20%20%20*%20%E9%80%9A%E8%BF%87%E5%A1%AB%E5%86%99%E9%81%93%E5%85%B7%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8C%B9%E9%85%8D%E5%AE%B9%E5%99%A8%E7%B1%BB%E5%9E%8B%0A%20%20%20%20*%20%E9%80%9A%E8%BF%87%E5%AE%B9%E5%99%A8%E8%87%AA%E5%AE%9A%E4%B9%89%20%60check_drop%60%20%E5%87%BD%E6%95%B0%E7%AD%9B%E9%80%89%E5%8F%AF%E4%BB%A5%E6%94%BE%E5%85%A5%E7%9A%84%E9%81%93%E5%85%B7%20%20%20%0A%20%20%20%20%60%60%60%20lua%20--%20lua%5Ccommon%5Ctray%5Cclass%5Ctray_class_base.lua%0A%20%20%20%20%20%20%20%20function%20M%3Acheck_drop(item)%0A%20%20%20%20%60%60%60%0A%20%20%20%20%0A*%20%E6%9F%A5%E6%89%BE%E9%81%93%E5%85%B7%0A%20%20%20%20*%20%E6%A0%B9%E6%8D%AE%E4%BD%8D%E7%BD%AE%E6%9F%A5%E6%89%BE%E6%9F%90%E4%B8%80%E4%B8%AA%E9%81%93%E5%85%B7%0A%20%20%20%20%60%60%60%20lua%20--%20lua%5Ccommon%5Ctray%5Cclass%5Ctray_class_base.lua%0A%20%20%20%20%20%20%20%20function%20M%3Afetch_item(slot)%0A%20%20%20%20%60%60%60%0A%20%20%20%20%0A%20%20%20%20*%20%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E6%9F%A5%E6%89%BE%E6%9F%90%E7%B1%BB%E9%81%93%E5%85%B7%E5%88%97%E8%A1%A8%0A%20%20%20%20%60%60%60lua%20--%20lua%5Ccommon%5Ctray%5Cclass%5Ctray_class_base.lua%0A%20%20%20%20%20%20function%20M%3Aquery_items(cmp)%0A%20%20%20%20%60%60%60%0A*%20%E6%94%AF%E6%8C%81%E9%80%9A%E8%BF%87%E6%B4%BE%E7%94%9F%E7%9A%84%E6%96%B9%E5%BC%8F%E9%87%8D%E5%86%99%20**%E6%8B%BF%E8%B5%B7(check_pick%2Fpick)**%20%E5%92%8C%20**%E6%94%BE%E4%B8%8B(check_drop%2Fdrop)**%20%E4%BB%A5%E5%8F%8A%20**use**%20%E7%9A%84%E9%80%BB%E8%BE%91%0A*%20%E6%B7%BB%E5%8A%A0%E5%88%A0%E9%99%A4%E9%81%93%E5%85%B7%E6%97%B6%E8%87%AA%E5%8A%A8%E5%90%8C%E6%AD%A5%0A%0A%23%23%23%23%23%20%E4%BB%A3%E7%A0%81%E5%88%97%E8%A1%A8%0A%0A%7C%20%E6%96%87%E4%BB%B6%20%7C%E5%8A%9F%E8%83%BD%20%20%7C%0A%7C%20---%20%7C%20---%20%7C%0A%7C%20%20tray_class_base.lua%7C%20%E5%AE%B9%E5%99%A8%E5%9F%BA%E7%B1%BB%20%20%7C%0A%7C%20tray_class_bag.lua%20%7C%20%E8%83%8C%E5%8C%85%20%7C%0A%7C%20tray_class_equip.lua%20%7C%20%E8%A3%85%E5%A4%87%20%20%7C%0A%7C%20tray_class_imprint.lua%20%7C%20%E5%8D%B0%E8%AE%B0%20%20%7C%0A%0A%0A%23%23%23%23%202.%20Item%0A%23%23%23%23%23%20%E5%8A%9F%E8%83%BD%0A*%20%E9%81%93%E5%85%B7%E6%9C%AC%E8%BA%AB%E6%B2%A1%E6%9C%89%E5%8A%9F%E8%83%BD%EF%BC%8C%E5%8F%AA%E6%9C%89%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%A4%96%E9%83%A8%E6%A8%A1%E5%9D%97%E5%8F%96%E8%BF%99%E4%BA%9B%E6%95%B0%E6%8D%AE%E5%8E%BB%E5%81%9A%E7%9B%B8%E5%BA%94%E7%9A%84%E4%BA%8B%E6%83%85%0A*%20%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%0A%0A%7C%20%E5%B1%9E%E6%80%A7%E5%90%8D%20%7C%20%E4%BD%9C%E7%94%A8%20%7C%20%E7%B1%BB%E5%9E%8B%20%7C%0A%7C%20---%20%7C%20---%20%7C%20---%20%7C%0A%7C%20tray%20%20%7C%20%E6%94%AF%E6%8C%81%E7%9A%84%E5%AE%B9%E5%99%A8%E4%B8%AD%20%7C%20%5B1%2C2%2C3%5D%20%20%7C%0A%7C%20desc%20%7C%20%E6%8F%8F%E8%BF%B0%20%7C%20%20%7C%0A%7C%20stack_count_max%20%7C%20%E6%9C%80%E5%A4%A7%E5%8F%A0%E5%8A%A0%E6%95%B0%20%20%7C%2064%20%20%7C%0A%7C%20canUse%20%7C%20%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%20%20%7C%20%20false%20%7C%0A%7C%20icon%20%7C%20%E5%9B%BE%E6%A0%87%20%20%7C%20%20angel_wings.png%20%7C%0A%7C%20mesh%20%7C%20%E6%A8%A1%E5%9E%8B%20%20%7C%20%20%7C%0A%7C%20equip_buff%20%7C%20%E8%A3%85%E5%A4%87%20buff%2C%20%E7%A9%BF%E4%B8%8A%E8%BF%99%E4%B8%AA%E9%81%93%E5%85%B7%E5%8F%AF%E4%BB%A5%E8%8E%B7%E5%BE%97%E6%8C%87%E5%AE%9Abuff%20%20%7C%20%22myplugin%2Fxxxbuff%22%20%7C%0A%7C%20equip_skin%20%20%7C%20%E8%A3%85%E5%A4%87%E6%94%B9%E5%8F%98%E4%BA%BA%E7%89%A9%E5%A4%96%E8%A7%82%20%7C%20%7B%20%22master1%22%20%3A%20%22slave1%22%2C%20%22master2%22%20%3A%20%22slave2%22%7D%20%7C%0A%7C%20equip_skill%20%7C%20%E8%A3%85%E5%A4%87%E6%8A%80%E8%83%BD%20%20%7C%20%5B%22myplugin%2Fskill1%22%2C%20%22myplugin%2Fskill2%22%5D%20%7C%0A%7C%20needSave%20%7C%E6%98%AF%E5%90%A6%E9%9C%80%E8%A6%81%E4%BF%9D%E5%AD%98%20%20%7C%20%20true%2Ffalse%20%7C%0A%7C%20saveVars%20%7C%20%E9%9C%80%E8%A6%81%E4%BF%9D%E5%AD%98%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%8F%98%E9%87%8F%20%20%7C%20%20%7B%22xxx%22%3A%20true%2C%20%22yyy%22%3Atrue%20%7D%7C%0A%7C%20skill%20%7C%20%E6%89%8B%E6%8C%81%E6%8A%80%E8%83%BD%20%20%7C%20%7B%22myplugin%2Fskill3%22%2C%20%22myplugin%2Fskill4%22%7D%20%7C%0A%0A%0A%23%23%23%23%23%20%E4%BB%A3%E7%A0%81%E5%88%97%E8%A1%A8%0A%7C%20%E6%96%87%E4%BB%B6%20%7C%E5%8A%9F%E8%83%BD%20%20%7C%0A%7C%20---%20%7C%20---%20%7C%0A%7C%20item_class.lua%7C%20%E8%8E%B7%E5%8F%96%E9%81%93%E5%85%B7%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E6%8E%A5%E5%8F%A3%20%20%7C%0A%7C%20item_data.lua%20%7C%20%E9%81%93%E5%85%B7%E5%AF%B9%E8%B1%A1%E6%95%B0%E6%8D%AE%20%20%7C%0A%0A%23%23%23%23%20Entity%20%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86%0A%23%23%23%23%23%20%E9%85%8D%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%AE%B9%E5%99%A8%0A%3E%20%E9%85%8D%E7%BD%AE%E8%A3%85%E5%A4%87%201%2C%202%2C%203%2C%204%0A%3E%20%0A%20%20%20%20entityCfg.equipTrays%3A%5B1%2C%202%2C%203%2C%204%5D%0A%20%20%20%20%0A%3E%20%E9%85%8D%E7%BD%AE%E8%83%8C%E5%8C%85%20%0A%0A%20%20%20%20World.cfg.bagCap%3A%2054%0A%20%20%20%20%0A%23%23%23%23%23%20%E4%B8%BB%E8%A6%81%E5%87%BD%E6%95%B0%0A*%20%E7%BB%99%E7%8E%A9%E5%AE%B6%E8%83%8C%E5%8C%85%E6%B7%BB%E5%8A%A0%E9%81%93%E5%85%B7%0A%20%20%20%60%60%60lua%20entity_tray.lua%0A%20%20%20function%20M%3Aadd_item(full_name%2C%20count%2C%20proc%2C%20check)%0A%20%20%20%60%60%60%0A*%20%E6%B7%BB%E5%8A%A0%E5%AE%B9%E5%99%A8%0A%20%20%20%20%60%60%60%20lua%0A%20%20%20%20function%20M%3Aadd_tray(obj)%0A%20%20%20%20%60%60%60%0A*%20%E6%9F%A5%E6%89%BE%E5%AE%B9%E5%99%A8%0A%20%20%20%20%60%60%60%20lua%0A%20%20%20%20function%20M%3Aquery_trays(filter)%20%20--%20%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E6%9F%A5%E6%89%BE%0A%20%20%20%20function%20M%3Afetch_tray(tid)%20%20--%20%E6%A0%B9%E6%8D%AE%E8%83%8C%E5%8C%85id%0A%20%20%20%20%60%60%60%0A%0A%7C%20%E6%96%87%E4%BB%B6%20%7C%E5%8A%9F%E8%83%BD%20%20%7C%0A%7C%20---%20%7C%20---%20%7C%0A%7C%20entity_tray.lua%20%7C%20Entity%20%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86%20%7C%0A%0A%23%23%23%23%20%E9%81%93%E5%85%B7%E5%AF%B9%E8%B1%A1%0A%E4%BB%A5%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B9%E5%BC%8F%E6%93%8D%E4%BD%9C%E9%81%93%E5%85%B7%E6%9B%B4%E5%8A%A0%E7%AC%A6%E5%90%88trigger-action%E5%BC%80%E5%8F%91%E7%9B%B4%E8%A7%89%0A%0A%23%23%23%23%20%E6%96%B9%E5%9D%97%E9%81%93%E5%85%B7(BlockItem)%0A%E6%96%B9%E5%9D%97%E9%81%93%E5%85%B7%E6%98%AF%E6%9F%90%E7%B1%BB%E7%89%B9%E5%88%AB%E7%9A%84%E9%81%93%E5%85%B7%EF%BC%8C%E5%AE%83%E7%9A%84%20fullName%20%E5%9B%BA%E5%AE%9A%E4%B8%BA%20%60%2Fblock%60%EF%BC%8C%E9%80%9A%E8%BF%87%E8%AE%BE%E7%BD%AE%20blockId%20%E6%9D%A5%E5%8C%BA%E5%88%86%E4%B8%8D%E5%90%8C%E7%9A%84%E6%96%B9%E5%9D%97%0A%0A%23%23%23%23%20%E5%9C%BA%E6%99%AF%E9%81%93%E5%85%B7(DropItem)%0A%E5%9C%BA%E6%99%AF%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%B8%A6%E6%9C%89%E9%81%93%E5%85%B7%E6%95%B0%E6%8D%AE%EF%BC%8C%E6%9C%89%E7%94%9F%E5%91%BD%E6%9C%9F%EF%BC%8C%E6%8D%A1%E8%B5%B7%E6%9D%A5%E4%B9%8B%E5%90%8E%E4%BC%9A%E8%8E%B7%E5%BE%97%E7%9B%B8%E5%BA%94%E9%81%93%E5%85%B7%0A%0A%23%23%23%23%20%E6%89%8B%E4%B8%8A%E9%81%93%E5%85%B7(HoldItem)%0A%E5%BF%AB%E6%8D%B7%E6%A0%8F%E9%80%89%E4%B8%AD%E7%9A%84%E9%81%93%E5%85%B7%E5%B0%B1%E6%98%AF%E6%89%8B%E4%B8%8A%E9%81%93%E5%85%B7%EF%BC%8C%E4%BC%9A%E7%BB%99%E7%8E%A9%E5%AE%B6%E6%B7%BB%E4%B8%8A%E9%81%93%E5%85%B7%E9%85%8D%E7%BD%AE%E4%B8%AD%E7%9A%84%E6%8A%80%E8%83%BD</center></span>
</div></body></html> 